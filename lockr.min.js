(function(f,e){"undefined"!==typeof exports?"undefined"!==typeof module&&module.exports&&(exports=module.exports=e(f,exports)):"function"===typeof define&&define.amd?define(["exports"],function(a){f.Lockr=e(f,a)}):f.Lockr=e(f,{})})(this,function(f,e){Array.prototype.indexOf||(Array.prototype.indexOf=function(a,c){var d=this.length>>>0,b=Number(c)||0,b=0>b?Math.ceil(b):Math.floor(b);for(0>b&&(b+=d);b<d;b++)if(b in this&&this[b]===a)return b;return-1});e.prefix="";e._getPrefixedKey=function(a,c){c=
c||{};return c.noPrefix?a:this.prefix+a};e.set=function(a,c,d){d=this._getPrefixedKey(a,d);try{localStorage.setItem(d,JSON.stringify({data:c}))}catch(b){console&&console.warn("Lockr didn't successfully save the '{"+a+": "+c+"}' pair, because the localStorage is full.")}};e.get=function(a,c,d){a=this._getPrefixedKey(a,d);var b;try{b=JSON.parse(localStorage.getItem(a))}catch(e){b=null}return null===b?c:b.data||c};e.sadd=function(a,c,d){d=this._getPrefixedKey(a,d);var b,g=e.smembers(a);if(-1<g.indexOf(c))return null;
try{g.push(c),b=JSON.stringify({data:g}),localStorage.setItem(d,b)}catch(f){console.log(f),console&&console.warn("Lockr didn't successfully add the "+c+" to "+a+" set, because the localStorage is full.")}};e.smembers=function(a,c){var d=this._getPrefixedKey(a,c),b;try{b=JSON.parse(localStorage.getItem(d))}catch(e){b=null}return null===b?[]:b.data||[]};e.sismember=function(a,c,d){this._getPrefixedKey(a,d);return-1<e.smembers(a).indexOf(c)};e.getAll=function(){return Object.keys(localStorage).map(function(a){return e.get(a)})};
e.srem=function(a,c,d){d=this._getPrefixedKey(a,d);var b,f=e.smembers(a,c);b=f.indexOf(c);-1<b&&f.splice(b,1);b=JSON.stringify({data:f});try{localStorage.setItem(d,b)}catch(h){console&&console.warn("Lockr couldn't remove the "+c+" from the set "+a)}};e.rm=function(a){localStorage.removeItem(a)};e.flush=function(){localStorage.clear()};e.removeByIndex=function(a,c){var d=this.smembers(a);d.splice(c,1);d=JSON.stringify({data:d});localStorage.setItem(a,d)};return e});